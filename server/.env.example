# -----------------------------------------------------------------------------
# JobHunter Server (.env.example)
# Copy to: server/.env.local OR server/local.env
# -----------------------------------------------------------------------------

# Runtime
NODE_ENV=development
PORT=3001
APP_ENV=local
APP_NAME=jobhunter

# Database
DATABASE_URL=postgresql://jobhunter:jobhunter@127.0.0.1:5432/jobhunter?sslmode=disable
DBMATE_MIGRATIONS_TABLE=jobhunter_schema_migrations

# Storage (Fake GCS for local dev)
GCS_ENDPOINT=http://127.0.0.1:4443
GCS_PROJECT_ID=local-dev
RESOURCE_PREFIX=jobhunter-local

# Feedback (optional)
FEEDBACK_ENABLED=true
GITHUB_OWNER=your-github-user-or-org
GITHUB_REPO=jobhunter
FEEDBACK_GITHUB_TOKEN=github_pat_replace_me

# Auth
# Supported: keycloak
AUTH_PROVIDER=keycloak

# Local development mock mode.
# true  = accept any bearer token and inject fixed local user
# false = run real JWT validation even in development
# Use true for Bruno/dev-login flow. Use false for real Keycloak token validation.
AUTH_LOCAL_DEV_USE_MOCK_IDENTITY=false

# OIDC config (Keycloak)
# OIDC_ISSUER
# - Realm issuer URL (example: http://localhost:8080/realms/jobhunter)
OIDC_ISSUER=http://localhost:8080/realms/jobhunter
#
# OIDC_AUDIENCE
# - Audience configured by Keycloak audience mapper (often API client id)
OIDC_AUDIENCE=jobhunter-api
#
# OIDC_ALLOWED_ALGORITHMS
# - Keep RS256 unless your IdP is explicitly configured otherwise.
OIDC_ALLOWED_ALGORITHMS=RS256

# Policy enforcement
# AUTH_ENFORCE_APP_CLAIMS
# - true: require app claim checks in token
# - false: skip app claim checks (useful for initial integration)
AUTH_ENFORCE_APP_CLAIMS=false
#
# AUTH_APP_ID_CLAIM / AUTH_APP_ENV_CLAIM
# - Token claim names that your IdP emits (Keycloak token mappers)
AUTH_APP_ID_CLAIM=app_id
AUTH_APP_ENV_CLAIM=app_env
#
# OIDC_CLIENT_ALLOWLIST
# - Comma-separated client IDs allowed to call this API.
# - For local setup, typically set this to the frontend client id.
OIDC_CLIENT_ALLOWLIST=jobhunter-client
#
# AUTH_REQUIRE_CLIENT_ALLOWLIST
# - true: fail startup if OIDC_CLIENT_ALLOWLIST is empty.
# - default is true outside local APP_ENV to protect isolated deployments.
AUTH_REQUIRE_CLIENT_ALLOWLIST=false
#
# AUTH_REQUIRED_SCOPES
# - Comma-separated list of scopes required by policy (if used).
AUTH_REQUIRED_SCOPES=
