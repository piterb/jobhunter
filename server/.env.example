# -----------------------------------------------------------------------------
# JobHunter Server (.env.example)
# Copy to: server/.env.local OR server/local.env
# -----------------------------------------------------------------------------

# Runtime
NODE_ENV=development
PORT=3001
APP_ENV=local
APP_NAME=jobhunter

# Database
DATABASE_URL=postgresql://jobhunter:jobhunter@127.0.0.1:5432/jobhunter?sslmode=disable
DBMATE_MIGRATIONS_TABLE=jobhunter_schema_migrations

# Storage (Fake GCS for local dev)
GCS_ENDPOINT=http://127.0.0.1:4443
GCS_PROJECT_ID=local-dev
RESOURCE_PREFIX=jobhunter-local

# Feedback (optional)
FEEDBACK_ENABLED=true
GITHUB_OWNER=your-github-user-or-org
GITHUB_REPO=jobhunter
FEEDBACK_GITHUB_TOKEN=github_pat_replace_me

# Auth (provider-agnostic layer; defaults are Auth0-compatible)
# Supported: auth0 | keycloak
# - auth0: use Auth0 as OIDC provider
# - keycloak: use Keycloak realm as OIDC provider
AUTH_PROVIDER=auth0

# Local development mock mode.
# true  = accept any bearer token and inject fixed local user
# false = run real JWT validation even in development
# Use true for Bruno/dev-login flow. Use false for real Auth0 token validation.
AUTH_LOCAL_DEV_USE_MOCK_IDENTITY=true

# OIDC config (provider neutral)
# OIDC_ISSUER
# - Auth0: Auth0 Dashboard -> Settings -> Domain, then format as https://<domain>/
# - Keycloak: Realm issuer URL (example: https://id.example.com/realms/appa-tst1)
# OIDC_ISSUER=https://your-issuer/
#
# OIDC_AUDIENCE
# - Auth0: Applications -> APIs -> <your API> -> Identifier
# - Keycloak: Audience configured on the client/resource server
# OIDC_AUDIENCE=https://api.jobhunter.local
#
# OIDC_ALLOWED_ALGORITHMS
# - Keep RS256 unless your IdP is explicitly configured otherwise.
# OIDC_ALLOWED_ALGORITHMS=RS256

# Backward compatibility aliases (used if OIDC_* is not set)
# AUTH0_ISSUER_BASE_URL
# - Auth0 Dashboard -> Settings -> Domain
# AUTH0_ISSUER_BASE_URL=https://your-tenant.eu.auth0.com
#
# AUTH0_AUDIENCE
# - Auth0 Dashboard -> Applications -> APIs -> <your API> -> Identifier
# AUTH0_AUDIENCE=https://api.jobhunter.local

# Policy enforcement
# AUTH_ENFORCE_APP_CLAIMS
# - true: require app claim checks in token
# - false: skip app claim checks (useful for initial integration)
# AUTH_ENFORCE_APP_CLAIMS=true
#
# AUTH_APP_ID_CLAIM / AUTH_APP_ENV_CLAIM
# - Token claim names that your IdP emits (Auth0 Actions/Keycloak token mappers)
# AUTH_APP_ID_CLAIM=app_id
# AUTH_APP_ENV_CLAIM=app_env
#
# OIDC_CLIENT_ALLOWLIST
# - Comma-separated client IDs allowed to call this API.
# - Auth0 client ID source: Applications -> Applications -> <app> -> Client ID
# OIDC_CLIENT_ALLOWLIST=jobhunter-web-tst,jobhunter-cli-tst
#
# AUTH_REQUIRE_CLIENT_ALLOWLIST
# - true: fail startup if OIDC_CLIENT_ALLOWLIST is empty.
# - default is true outside local APP_ENV to protect isolated deployments.
# AUTH_REQUIRE_CLIENT_ALLOWLIST=true
#
# AUTH_REQUIRED_SCOPES
# - Comma-separated list of scopes required by policy (if used).
# - Auth0 scopes source: Applications -> APIs -> <your API> -> Permissions
# AUTH_REQUIRED_SCOPES=read:jobs,write:jobs
